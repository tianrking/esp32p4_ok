<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:289px;height:467px;background:#fff" width="289" height="467" contentStyleType="text/css" preserveAspectRatio="none" version="1.1" viewBox="0 0 289 467" zoomAndPan="magnify"><g><text x="80" y="29.966" fill="#000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="126">SPI HD Host Write</text><line style="stroke:#181818;stroke-width:.5;stroke-dasharray:5,5" x1="29" x2="29" y1="79.136" y2="429.902"/><line style="stroke:#181818;stroke-width:.5;stroke-dasharray:5,5" x1="164.5" x2="164.5" y1="79.136" y2="429.902"/><rect style="stroke:#181818;stroke-width:.5" width="49" height="33.068" x="5" y="45.068" fill="#E2E2F0" rx="2.5" ry="2.5"/><text x="12" y="67.034" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35">Slave</text><rect style="stroke:#181818;stroke-width:.5" width="49" height="33.068" x="5" y="428.902" fill="#E2E2F0" rx="2.5" ry="2.5"/><text x="12" y="450.868" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35">Slave</text><rect style="stroke:#181818;stroke-width:.5" width="44" height="33.068" x="142.5" y="45.068" fill="#E2E2F0" rx="2.5" ry="2.5"/><text x="149.5" y="67.034" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30">Host</text><rect style="stroke:#181818;stroke-width:.5" width="44" height="33.068" x="142.5" y="428.902" fill="#E2E2F0" rx="2.5" ry="2.5"/><text x="149.5" y="450.868" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30">Host</text><path fill="#FEFFDD" d="M91,94.1358 L91,121.1358 L237,121.1358 L237,104.1358 L227,94.1358 L91,94.1358" style="stroke:#181818;stroke-width:.5"/><path fill="#FEFFDD" d="M227,94.1358 L227,104.1358 L237,104.1358 L227,94.1358" style="stroke:#181818;stroke-width:.5"/><text x="97" y="113.033" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125">Prepare data to send</text><polygon fill="#181818" points="40.5 146.548 30.5 150.548 40.5 154.548 36.5 150.548" style="stroke:#181818;stroke-width:1"/><line style="stroke:#181818;stroke-width:1" x1="34.5" x2="163.5" y1="150.548" y2="150.548"/><text x="46.5" y="144.739" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110">Read RX_BUF_LEN</text><path fill="#FEFFDD" d="M47,163.5479 L47,208.5479 L282,208.5479 L282,173.5479 L272,163.5479 L47,163.5479" style="stroke:#181818;stroke-width:.5"/><path fill="#FEFFDD" d="M272,163.5479 L272,173.5479 L282,173.5479 L272,163.5479" style="stroke:#181818;stroke-width:.5"/><text x="53" y="182.445" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107">available buffers =</text><text x="53" y="200.151" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214">RX_BUF_LEN - (cached)RX_BUF_LEN</text><path fill="#FEFFDD" d="M61,218.9599 L61,263.9599 L268,263.9599 L268,228.9599 L258,218.9599 L61,218.9599" style="stroke:#181818;stroke-width:.5"/><path fill="#FEFFDD" d="M258,218.9599 L258,228.9599 L268,228.9599 L258,218.9599" style="stroke:#181818;stroke-width:.5"/><text x="67" y="237.857" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186">loop reading RX_BUF_LEN until</text><text x="67" y="255.563" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97">buffers available</text><polygon fill="#181818" points="40.5 289.078 30.5 293.078 40.5 297.078 36.5 293.078" style="stroke:#181818;stroke-width:1"/><line style="stroke:#181818;stroke-width:1" x1="34.5" x2="163.5" y1="293.078" y2="293.078"/><text x="46.5" y="287.269" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82">Send WRDMA</text><polygon fill="#181818" points="40.5 320.784 30.5 324.784 40.5 328.784 36.5 324.784" style="stroke:#181818;stroke-width:1"/><line style="stroke:#181818;stroke-width:1" x1="34.5" x2="163.5" y1="324.784" y2="324.784"/><text x="46.5" y="318.975" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74">Tranfer Data</text><polygon fill="#181818" points="40.5 370.196 30.5 374.196 40.5 378.196 36.5 374.196" style="stroke:#181818;stroke-width:1"/><line style="stroke:#181818;stroke-width:1" x1="34.5" x2="163.5" y1="374.196" y2="374.196"/><text x="46.5" y="350.681" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95">Send WR_DONE</text><text x="46.5" y="368.387" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111">(at end of transfer)</text><path fill="#FEFFDD" d="M67,387.196 L67,414.196 L261,414.196 L261,397.196 L251,387.196 L67,387.196" style="stroke:#181818;stroke-width:.5"/><path fill="#FEFFDD" d="M251,387.196 L251,397.196 L261,397.196 L251,387.196" style="stroke:#181818;stroke-width:.5"/><text x="73" y="406.093" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173">update (cached)RX_BUF_LEN</text></g></svg>